#!/usr/bin/env bash
#-------------------------------------------------------------------------------
#
# Setup WordPress
#
#-------------------------------------------------------------------------------

wp core version
wp core install \
    --url="http://localhost:8080" \
    --title=Example \
    --admin_user=admin \
    --admin_password=admin \
    --admin_email=info@example.com \
    --skip-email

# Update site configuration.
wp option update blogdescription "Demo"
wp option update timezone_string "Australia/Brisbane"

# Create dashboard and assign as home page.
dashboard=$(
    wp post create \
        --post_status=publish \
        --post_type=page \
        --post_title="Dashboard" \
        --porcelain
)
wp option update show_on_front page
wp option update page_on_front ${dashboard}

wp option update permalink_structure "/%year%/%monthnum%/%day%/%postname%/"

# Cleanup pre-packaged plugins.
wp plugin delete hello
wp plugin delete akismet

wp theme delete twentynineteen
wp theme delete twentyseventeen

wp plugin activate scrutinize-wp
